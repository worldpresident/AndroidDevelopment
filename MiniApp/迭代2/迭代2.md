## 团购小程序文档

张琛瑞 1913157

AppID wx14ed1e9ad0107aa9 



#### 一、应用场景分析

作为一位武汉人，我从疫情爆发以来就首当其冲地受到影响。在封城期间，生活物资的供应主要依靠社区团购来获取。但是，传统的在微信群内接龙的方式并不高效，统计起来比较麻烦，且很容易漏看错看，导致获取物资的机会浪费或是物资浪费。不仅如此，在本次上海疫情期间，有很多团长通过个人关系获得物资购买的渠道，但是这样的团购却无法使用到便捷的小程序。基于以上的背景，我决定开发一款社区团购小程序，帮助人们在封城期间更方便地进行团购。



#### 二、功能介绍

1.发起团购

我们可以作为团长，发起团购。

2.分享团购

可以将团购信息分享给好友。

3.修改团购状态（暂停、结束、取消团购）

作为团长，可以进行对团购状态的管理。

4.联系团长

我们可以通过电话联系到团长询问具体情况。



#### 三、技术与方法介绍

1.发起团购

团购有许多商品参数，例如主题、商品名、价格和描述图片等等。在新建商品时会将商品信息存取到数据库中。

在发起团购时，将这些参数通过常量params传递，调用updateCommodity()函数，函数内部的wedaCreate()方法进行数据的插入，创建开团信息。再使用createCommodity()函数，函数内部的wedaUpdate()方法进行数据的更新，实现团购信息的上传。然后会进行数据校验，如果检测到商品信息、团购标题、团长电话没有填写，那么会调用showToast弹出提示框，提醒用户完成信息的填写。



2.分享团购

在Index页的lifecycle中添加onShareAppMessage()函数，即可使用微信小程序的分享功能。



3.修改团购状态

为了方便记录订单状态，定义了常量status来表示订单当前状态。1代表进行中，2代表暂停中，3代表已完成，4代表已取消。在用户选择改变订单状态时，会使用wedaUpdate()来修改数据库中存储的订单状态的代号。需要注意的是，我们的订单只有在进行状态下可以暂停，也只有在进行状态下可以取消和完成。当当前状态和用户需要改变的状态出现矛盾时，会调用showToast弹出提示框进行提醒。



4.联系团长

调用callPhone()，跳转到手机的拨号页面，自动填入团长预留的手机号，需要用户手动操作进行拨打。



#### 四、功能展示

详见演示视频

